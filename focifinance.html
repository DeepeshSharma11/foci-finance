<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foci Finance - Live Trading & Financial Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Base Styles */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #0f172a;
            --accent: #06d6a0;
            --accent-dark: #05b386;
            --light: #f8fafc;
            --gray: #64748b;
            --dark: #1e293b;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
            padding-bottom: 70px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        section {
            padding: 80px 0;
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
        }

        h2 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            text-align: center;
            margin-bottom: 3rem;
        }

        h3 {
            font-size: clamp(1.4rem, 3vw, 1.8rem);
        }

        p {
            margin-bottom: 1.5rem;
            color: var(--gray);
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-accent {
            background-color: var(--accent);
            box-shadow: 0 4px 6px rgba(6, 214, 160, 0.2);
        }

        .btn-accent:hover {
            background-color: var(--accent-dark);
            box-shadow: 0 6px 12px rgba(6, 214, 160, 0.3);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        /* Header & Navigation */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
        }

        .logo-text span {
            color: var(--primary);
        }

        nav {
            display: flex;
            align-items: center;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            transition: var(--transition);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            padding-top: 150px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-container {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .hero-content {
            flex: 1;
        }

        .hero-content h1 {
            margin-bottom: 1.5rem;
        }

        .hero-content p {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: 2.5rem;
            max-width: 600px;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .hero-visual {
            flex: 1;
            position: relative;
        }

        .trading-widget {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin-left: auto;
            position: relative;
            z-index: 2;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .widget-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .market-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: var(--success);
        }

        .market-status.closed {
            color: var(--danger);
        }

        .market-status i {
            font-size: 0.7rem;
        }

        .price-chart {
            height: 200px;
            margin-bottom: 20px;
            position: relative;
        }

        .price-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .current-price {
            font-size: clamp(1.5rem, 3vw, 1.8rem);
            font-weight: 700;
        }

        .price-change {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }

        .positive {
            color: var(--success);
        }

        .negative {
            color: var(--danger);
        }

        .trading-pairs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .trading-pair {
            padding: 8px 15px;
            background: var(--light);
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .trading-pair.active {
            background: var(--primary);
            color: white;
        }

        .trading-actions {
            display: flex;
            gap: 10px;
        }

        .trading-actions .btn {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-size: 0.9rem;
        }

        .floating-shapes {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
        }

        .shape-1 {
            width: 300px;
            height: 300px;
            background: var(--primary);
            top: -100px;
            right: -100px;
        }

        .shape-2 {
            width: 200px;
            height: 200px;
            background: var(--accent);
            bottom: -50px;
            right: 150px;
        }

        /* Features Section */
        .features {
            background-color: white;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            border: 1px solid #f1f5f9;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            color: white;
            font-size: 1.8rem;
        }

        /* Services Section */
        .services {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
        }

        .services h2 {
            color: white;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .service-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .service-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
        }

        .service-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            color: var(--accent);
            font-size: 1.5rem;
        }

        /* Trading Tools Section */
        .trading-tools {
            background-color: white;
        }

        .tools-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .tool-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            border: 1px solid #f1f5f9;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .tool-icon {
            width: 60px;
            height: 60px;
            background: var(--light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }

        /* Calculator Section */
        .calculator {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        }

        .calculator-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 50px;
        }

        .calculator-form {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .calculator-result {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .result-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--primary);
        }

        /* Contact Section - COMPACT VERSION */
        .contact {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            padding: 60px 0;
        }

        .contact h2 {
            color: white;
            font-size: clamp(1.8rem, 4vw, 2rem);
            margin-bottom: 2rem;
        }

        .contact-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
            font-size: 1rem;
            flex-shrink: 0;
        }

        .contact-item h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .contact-item p {
            font-size: 0.9rem;
            margin-bottom: 0;
            line-height: 1.4;
        }

        .contact-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .contact-form h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        .form-message {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            display: none;
        }

        .form-message.success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
            display: block;
        }

        .form-message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
            display: block;
        }

        .contact-form .form-group {
            margin-bottom: 15px;
        }

        .contact-form .form-group label {
            font-size: 0.9rem;
            margin-bottom: 6px;
        }

        .contact-form .form-group input, 
        .contact-form .form-group textarea {
            padding: 10px 12px;
            font-size: 0.9rem;
        }

        .contact-form .btn {
            padding: 10px 20px;
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            background-color: var(--secondary);
            color: white;
            padding: 60px 0 30px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
        }

        .footer-col h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 3px;
            background-color: var(--accent);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        /* Mobile Navigation - HORIZONTAL SCROLLING */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            padding: 10px 0;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none; /* Firefox */
        }

        .mobile-nav::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Edge */
        }

        .mobile-nav-links {
            display: inline-flex;
            list-style: none;
            padding: 0 15px;
            gap: 20px;
        }

        .mobile-nav-links a {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.8rem;
            transition: var(--transition);
            padding: 5px 10px;
            border-radius: 20px;
            min-width: 70px;
        }

        .mobile-nav-links a i {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .mobile-nav-links a.active {
            color: var(--primary);
            background: rgba(37, 99, 235, 0.1);
        }

        /* Real-time Features Styles */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: var(--success);
            color: white;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .stock-ticker {
            background: var(--secondary);
            color: white;
            padding: 10px 0;
            overflow: hidden;
            position: relative;
        }
        
        .ticker-container {
            display: flex;
            animation: ticker-scroll 30s linear infinite;
        }
        
        .ticker-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 30px;
            white-space: nowrap;
        }
        
        @keyframes ticker-scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        .news-section {
            background: var(--light);
            padding: 40px 0;
        }
        
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .news-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: var(--transition);
        }
        
        .news-card:hover {
            transform: translateY(-5px);
        }
        
        .news-source {
            font-size: 0.8rem;
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .news-title {
            font-weight: 600;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .news-date {
            font-size: 0.8rem;
            color: var(--gray);
        }
        
        .market-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .market-open {
            color: var(--success);
        }
        
        .market-closed {
            color: var(--danger);
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--gray);
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }

        /* Market Stats */
        .market-stats {
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: var(--transition);
        }

        .stat-box:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* New Features */
        .performance-section {
            background: white;
            padding: 60px 0;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .performance-card {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .performance-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .performance-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .hero-container {
                flex-direction: column;
                text-align: center;
            }
            
            .hero-buttons {
                justify-content: center;
            }
            
            .trading-widget {
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .mobile-nav {
                display: block;
            }
            
            section {
                padding: 60px 0;
            }
            
            .hero {
                padding-top: 120px;
            }
            
            .calculator-container {
                grid-template-columns: 1fr;
            }
            
            body {
                padding-bottom: 70px;
            }
            
            footer {
                padding-bottom: 80px;
            }

            .contact {
                padding: 50px 0;
            }

            .contact-container {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .trading-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .trading-widget {
                padding: 20px;
            }
            
            .trading-pairs {
                justify-content: center;
            }

            .contact {
                padding: 40px 0;
            }

            .contact-form {
                padding: 20px;
            }

            .contact-item {
                gap: 10px;
            }

            .contact-icon {
                width: 35px;
                height: 35px;
            }

            .market-stats {
                grid-template-columns: 1fr;
            }

            .mobile-nav-links {
                gap: 15px;
                padding: 0 10px;
            }

            .mobile-nav-links a {
                min-width: 65px;
                font-size: 0.75rem;
            }

            .mobile-nav-links a i {
                font-size: 1.1rem;
            }
        }

        /* Performance Optimizations */
        .lazy-load {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .lazy-loaded {
            opacity: 1;
        }

        /* Loading Animation */
        .skeleton-loader {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo">
                <div class="logo-icon">F</div>
                <div class="logo-text">Foci<span>Finance</span></div>
            </a>
            
            <nav>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#live-markets">Live Markets</a></li>
                    <li><a href="#news">News</a></li>
                    <li><a href="#calculator">Calculator</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Live Stock Ticker -->
    <div class="stock-ticker">
        <div class="ticker-container" id="stockTicker">
            <!-- Stock data will be loaded here -->
        </div>
    </div>

    <!-- Hero Section with Live Data -->
    <section class="hero" id="home">
        <div class="container hero-container">
            <div class="hero-content">
                <h1>Live Trading & Financial Solutions <span class="live-indicator"><i class="fas fa-circle"></i> LIVE</span></h1>
                <p>Real-time market data, advanced trading tools, and personalized investment strategies. Stay ahead with Foci Finance.</p>
                <div class="hero-buttons">
                    <a href="#live-markets" class="btn">View Live Markets</a>
                    <a href="#calculator" class="btn btn-outline">Financial Calculators</a>
                </div>
                
                <!-- Quick Market Stats -->
                <div class="market-stats">
                    <div class="stat-box">
                        <div class="stat-value" id="dowJones">Loading...</div>
                        <div class="stat-label">DOW JONES</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="sp500">Loading...</div>
                        <div class="stat-label">S&P 500</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="nasdaq">Loading...</div>
                        <div class="stat-label">NASDAQ</div>
                    </div>
                </div>
            </div>
            
            <div class="hero-visual">
                <div class="trading-widget">
                    <div class="widget-header">
                        <div class="widget-title">Live Market Overview</div>
                        <div class="market-status" id="marketStatus">
                            <i class="fas fa-circle"></i>
                            <span>Loading...</span>
                        </div>
                    </div>
                    
                    <div class="price-chart">
                        <canvas id="priceChart"></canvas>
                    </div>
                    
                    <div class="price-info">
                        <div class="current-price" id="currentPrice">$42,567.89</div>
                        <div class="price-change" id="priceChange">
                            <i class="fas fa-arrow-up"></i>
                            <span>+2.34%</span>
                        </div>
                    </div>
                    
                    <div class="trading-pairs">
                        <div class="trading-pair active" data-symbol="AAPL">AAPL</div>
                        <div class="trading-pair" data-symbol="GOOGL">GOOGL</div>
                        <div class="trading-pair" data-symbol="MSFT">MSFT</div>
                        <div class="trading-pair" data-symbol="TSLA">TSLA</div>
                    </div>
                    
                    <div class="trading-actions">
                        <a href="#" class="btn btn-accent">Buy</a>
                        <a href="#" class="btn btn-outline">Sell</a>
                    </div>
                </div>
                
                <div class="floating-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2>Why Choose Foci Finance</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Advanced Security</h3>
                    <p>Bank-level encryption and multi-factor authentication to keep your financial data and trading accounts secure. All transactions are monitored 24/7 for suspicious activities.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Lightning Fast Execution</h3>
                    <p>High-frequency trading capabilities with execution speeds under 10 milliseconds for optimal trading performance. Our infrastructure ensures minimal latency across global markets.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Smart Analytics</h3>
                    <p>AI-powered market insights, technical analysis tools, and personalized trading recommendations. Our algorithms analyze millions of data points to provide actionable insights.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <div class="container">
            <h2>Our Financial Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-chart-candlestick"></i>
                    </div>
                    <h3>Stock Trading</h3>
                    <p>Trade stocks, ETFs, and options with competitive commissions and advanced order types. Access to 50+ global markets with real-time data and research tools.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; color: white; border-color: white;">Learn More</a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fab fa-bitcoin"></i>
                    </div>
                    <h3>Crypto Trading</h3>
                    <p>Access 200+ major cryptocurrencies with secure wallets and advanced trading features. 24/7 trading with institutional-grade security and liquidity.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; color: white; border-color: white;">Explore Crypto</a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <h3>Forex Trading</h3>
                    <p>Trade 80+ major, minor, and exotic currency pairs with tight spreads and leverage up to 1:500. Advanced charting tools and economic calendar included.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; color: white; border-color: white;">Start Forex</a>
                </div>
                
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <h3>Portfolio Management</h3>
                    <p>Professional portfolio management services tailored to your investment goals and risk tolerance. Regular performance reviews and strategy adjustments.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px; color: white; border-color: white;">Manage Portfolio</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Performance Section -->
    <section class="performance-section">
        <div class="container">
            <h2>Performance Metrics</h2>
            <div class="performance-grid">
                <div class="performance-card">
                    <div class="performance-value" id="totalUsers">1.2M+</div>
                    <div class="performance-label">Active Users</div>
                </div>
                <div class="performance-card">
                    <div class="performance-value" id="dailyTrades">850K+</div>
                    <div class="performance-label">Daily Trades</div>
                </div>
                <div class="performance-card">
                    <div class="performance-value" id="assetsUnder">$4.8B</div>
                    <div class="performance-label">Assets Under Management</div>
                </div>
                <div class="performance-card">
                    <div class="performance-value" id="avgReturns">12.7%</div>
                    <div class="performance-label">Average Annual Returns</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Live Markets Section -->
    <section class="features" id="live-markets">
        <div class="container">
            <h2>Live Market Data <span class="live-indicator"><i class="fas fa-circle"></i> REAL-TIME</span></h2>
            <div id="marketsLoading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Loading market data...
            </div>
            <div id="marketsError" class="error-message" style="display: none;">
                Unable to load market data. Please check your connection.
            </div>
            <div class="features-grid" id="marketsGrid" style="display: none;">
                <!-- Market data will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Trading Tools Section -->
    <section class="trading-tools" id="trading-tools">
        <div class="container">
            <h2>Advanced Trading Tools</h2>
            <div class="tools-container">
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>Technical Analysis</h3>
                    <p>Advanced charting tools with over 100 technical indicators and drawing tools for comprehensive market analysis. Customizable layouts and timeframes.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px;">Explore Tools</a>
                </div>
                
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h3>Price Alerts</h3>
                    <p>Set custom price alerts for your favorite assets and receive notifications via email, SMS, or push notifications. Never miss a trading opportunity again.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px;">Set Alerts</a>
                </div>
                
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>Automated Trading</h3>
                    <p>Create and deploy automated trading strategies with our intuitive visual strategy builder and backtesting tools. No coding experience required.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px;">Build Strategy</a>
                </div>
                
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <h3>Market News & Analysis</h3>
                    <p>Stay informed with real-time market news, expert analysis, and economic calendar updates. Curated content from leading financial publications.</p>
                    <a href="#" class="btn btn-outline" style="margin-top: 15px;">Read News</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Live News Section -->
    <section class="news-section" id="news">
        <div class="container">
            <h2>Latest Financial News <span class="live-indicator"><i class="fas fa-circle"></i> UPDATED</span></h2>
            <div id="newsLoading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> Loading latest news...
            </div>
            <div id="newsError" class="error-message" style="display: none;">
                Unable to load news. Please check your connection.
            </div>
            <div class="news-grid" id="newsGrid" style="display: none;">
                <!-- News will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="calculator" id="calculator">
        <div class="container">
            <h2>Financial Calculators</h2>
            <div class="calculator-container">
                <div class="calculator-form">
                    <h3>Investment Calculator</h3>
                    <p>Calculate the future value of your investments with compound interest. Plan your financial future with accurate projections.</p>
                    
                    <div class="form-group">
                        <label for="initialInvestment">Initial Investment ($)</label>
                        <input type="number" id="initialInvestment" value="10000" min="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="monthlyContribution">Monthly Contribution ($)</label>
                        <input type="number" id="monthlyContribution" value="500" min="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="investmentPeriod">Investment Period (Years)</label>
                        <input type="number" id="investmentPeriod" value="10" min="1" max="50">
                    </div>
                    
                    <div class="form-group">
                        <label for="expectedReturn">Expected Annual Return (%)</label>
                        <input type="number" id="expectedReturn" value="7" min="0" max="50" step="0.1">
                    </div>
                    
                    <button id="calculateBtn" class="btn" style="width: 100%;">Calculate</button>
                </div>
                
                <div class="calculator-result">
                    <h3>Investment Projection</h3>
                    <div class="result-item">
                        <span>Initial Investment:</span>
                        <span id="initialResult">$10,000.00</span>
                    </div>
                    <div class="result-item">
                        <span>Total Contributions:</span>
                        <span id="contributionsResult">$60,000.00</span>
                    </div>
                    <div class="result-item">
                        <span>Interest Earned:</span>
                        <span id="interestResult">$25,937.42</span>
                    </div>
                    <div class="result-item">
                        <span>Future Value:</span>
                        <span id="futureValueResult">$95,937.42</span>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <canvas id="investmentChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2>Contact Us</h2>
            <div class="contact-container">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h3>Our Office</h3>
                            <p>123 Finance District, New York, NY 10001</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <h3>Phone</h3>
                            <p>+1 (555) 123-4567</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3>Email</h3>
                            <p>info@focifinance.com</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <h3>Business Hours</h3>
                            <p>Monday - Friday: 9:00 AM - 6:00 PM EST</p>
                            <p>Weekend: 10:00 AM - 2:00 PM EST</p>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Send us a Message</h3>
                    <div id="formMessage" class="form-message"></div>
                    
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="subject">Subject</label>
                            <input type="text" id="subject" name="subject" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" rows="4" style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 0.9rem; resize: vertical;" required></textarea>
                        </div>
                        
                        <button type="submit" class="btn" style="width: 100%;">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <h3>Foci Finance</h3>
                    <p>Advanced trading platforms and financial solutions for modern investors. Empowering your financial journey with cutting-edge technology.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#live-markets">Live Markets</a></li>
                        <li><a href="#news">News</a></li>
                        <li><a href="#calculator">Calculator</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Services</h3>
                    <ul class="footer-links">
                        <li><a href="#">Stock Trading</a></li>
                        <li><a href="#">Crypto Trading</a></li>
                        <li><a href="#">Forex Trading</a></li>
                        <li><a href="#">Portfolio Management</a></li>
                        <li><a href="#">Financial Planning</a></li>
                        <li><a href="#">Retirement Planning</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Risk Disclosure</a></li>
                        <li><a href="#">Regulatory Information</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                        <li><a href="#">Complaints Procedure</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Foci Finance. All rights reserved. | Founded by Nikhil Singh & Deepesh Sharma | Part of <a href="https://focitech.site" style="color: var(--accent);">FociTech</a></p>
            </div>
        </div>
    </footer>

    <!-- Mobile Navigation - HORIZONTAL SCROLLING -->
    <nav class="mobile-nav">
        <ul class="mobile-nav-links">
            <li>
                <a href="#home" class="active">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="#features">
                    <i class="fas fa-star"></i>
                    <span>Features</span>
                </a>
            </li>
            <li>
                <a href="#services">
                    <i class="fas fa-briefcase"></i>
                    <span>Services</span>
                </a>
            </li>
            <li>
                <a href="#live-markets">
                    <i class="fas fa-chart-line"></i>
                    <span>Markets</span>
                </a>
            </li>
            <li>
                <a href="#news">
                    <i class="fas fa-newspaper"></i>
                    <span>News</span>
                </a>
            </li>
            <li>
                <a href="#calculator">
                    <i class="fas fa-calculator"></i>
                    <span>Calculator</span>
                </a>
            </li>
            <li>
                <a href="#contact">
                    <i class="fas fa-envelope"></i>
                    <span>Contact</span>
                </a>
            </li>
        </ul>
    </nav>

    <script>
        // Environment Variables Configuration
        const ENV = {
            ALPHA_VANTAGE_API_KEY: '4AOOOTOE9Q87NXL2',
            ALPHA_VANTAGE_BASE_URL: 'https://www.alphavantage.co/query',
            GNEWS_API_KEY: '1f60e6ccea3d31a90e6a1c2fa458979b',
            GNEWS_BASE_URL: 'https://gnews.io/api/v4',
            FORM_SUBMIT_EMAIL: 'niku3325@gmail.com',
            FORM_SUBMIT_ENDPOINT: 'https://formsubmit.co/ajax',
            SITE_NAME: 'Foci Finance',
            SITE_URL: 'https://focifinance.com',
            CONTACT_EMAIL: 'info@focifinance.com',
            SUPPORT_EMAIL: 'support@focifinance.com',
            COMPANY_NAME: 'Foci Finance',
            FOUNDER_NIKHIL: 'Nikhil Singh',
            FOUNDER_DEEPESH: 'Deepesh Sharma',
            MAIN_WEBSITE: 'https://focitech.site',
            ALPHA_VANTAGE_RATE_LIMIT: 5,
            GNEWS_RATE_LIMIT: 100,
            TRACKED_STOCKS: ['AAPL', 'GOOGL', 'MSFT', 'AMZN', 'TSLA', 'META', 'NVDA', 'JPM', 'JNJ', 'V'],
            MARKET_INDICES: ['^DJI', '^GSPC', '^IXIC'],
            STOCK_REFRESH_INTERVAL: 60000,
            NEWS_REFRESH_INTERVAL: 600000,
            MARKET_STATUS_REFRESH: 60000,
            DEFAULT_CURRENCY: 'USD',
            DEFAULT_LANGUAGE: 'en',
            TIMEZONE: 'America/New_York',
            ENABLE_HTTPS: true,
            CSP_ENABLED: true,
            XSS_PROTECTION: true,
            ENABLE_REAL_TIME_DATA: true,
            ENABLE_NEWS_FEED: true,
            ENABLE_CALCULATOR: true,
            ENABLE_CONTACT_FORM: true
        };

        // DOM Elements
        const stockTicker = document.getElementById('stockTicker');
        const marketsGrid = document.getElementById('marketsGrid');
        const marketsLoading = document.getElementById('marketsLoading');
        const marketsError = document.getElementById('marketsError');
        const newsGrid = document.getElementById('newsGrid');
        const newsLoading = document.getElementById('newsLoading');
        const newsError = document.getElementById('newsError');
        const currentPrice = document.getElementById('currentPrice');
        const priceChange = document.getElementById('priceChange');
        const marketStatus = document.getElementById('marketStatus');
        const dowJones = document.getElementById('dowJones');
        const sp500 = document.getElementById('sp500');
        const nasdaq = document.getElementById('nasdaq');

        // Global variables
        let stockData = {};
        let priceChart;
        let isOnline = navigator.onLine;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            loadStockTicker();
            loadMarketData();
            loadNews();
            setupAutoRefresh();
            
            // Trading pairs interaction
            setupTradingPairs();
            
            // Calculator functionality
            setupCalculator();

            // Setup contact form
            setupContactForm();

            // Setup lazy loading
            setupLazyLoading();

            // Setup offline detection
            setupOfflineDetection();

            // Setup mobile nav scrolling
            setupMobileNavScrolling();
        });

        // Initialize price charts
        function initializeCharts() {
            const priceCtx = document.getElementById('priceChart').getContext('2d');
            priceChart = new Chart(priceCtx, {
                type: 'line',
                data: {
                    labels: ['9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00'],
                    datasets: [{
                        label: 'AAPL',
                        data: [178.50, 178.75, 179.20, 178.90, 179.50, 179.80, 178.72],
                        borderColor: '#06d6a0',
                        backgroundColor: 'rgba(6, 214, 160, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            display: false
                        },
                        x: {
                            display: false
                        }
                    },
                    elements: {
                        point: {
                            radius: 0
                        }
                    }
                }
            });

            // Investment chart
            const investmentCtx = document.getElementById('investmentChart').getContext('2d');
            new Chart(investmentCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Initial Investment', 'Contributions', 'Interest'],
                    datasets: [{
                        data: [10000, 60000, 25937],
                        backgroundColor: [
                            '#2563eb',
                            '#06d6a0',
                            '#f59e0b'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Load stock ticker data
        async function loadStockTicker() {
            try {
                // Show loading state
                stockTicker.innerHTML = '<div class="ticker-item skeleton-loader" style="height: 20px; width: 100%;"></div>';
                
                const stocks = [];
                
                // Fetch data for first 5 stocks for ticker
                for (let i = 0; i < 5; i++) {
                    const symbol = ENV.TRACKED_STOCKS[i];
                    const data = await fetchStockData(symbol);
                    if (data) {
                        stocks.push(data);
                        stockData[symbol] = data;
                    }
                }
                
                displayStockTicker(stocks);
            } catch (error) {
                console.error('Error loading stock ticker:', error);
                handleTickerError(error);
            }
        }

        // Fetch stock data from Alpha Vantage with fallback
        async function fetchStockData(symbol) {
            try {
                // Check if we're online
                if (!isOnline) {
                    throw new Error('Offline - using cached data');
                }

                const response = await fetch(
                    `${ENV.ALPHA_VANTAGE_BASE_URL}?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${ENV.ALPHA_VANTAGE_API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data['Global Quote'] && data['Global Quote']['05. price']) {
                    return {
                        symbol: data['Global Quote']['01. symbol'],
                        price: parseFloat(data['Global Quote']['05. price']),
                        change: parseFloat(data['Global Quote']['09. change']),
                        changePercent: parseFloat(data['Global Quote']['10. change percent'].replace('%', ''))
                    };
                } else {
                    console.warn(`No data returned for ${symbol}`);
                    return generateFallbackData(symbol);
                }
            } catch (error) {
                console.error(`Error fetching ${symbol}:`, error);
                return generateFallbackData(symbol);
            }
        }

        // Generate fallback data when API fails
        function generateFallbackData(symbol) {
            const basePrices = {
                'AAPL': 178.72, 'GOOGL': 138.21, 'MSFT': 330.53, 'AMZN': 145.80,
                'TSLA': 248.42, 'META': 312.65, 'NVDA': 435.15, 'JPM': 159.32,
                'JNJ': 157.89, 'V': 239.76, '^DJI': 34261.42, '^GSPC': 4453.53, '^IXIC': 13760.70
            };
            
            const basePrice = basePrices[symbol] || 100;
            const change = (Math.random() - 0.5) * 10;
            const changePercent = (change / basePrice) * 100;
            
            return {
                symbol: symbol,
                price: basePrice + change,
                change: change,
                changePercent: changePercent
            };
        }

        // Display stock ticker
        function displayStockTicker(stocks) {
            stockTicker.innerHTML = '';
            
            // Filter out null values
            const validStocks = stocks.filter(stock => stock !== null);
            
            if (validStocks.length === 0) {
                stockTicker.innerHTML = '<div class="ticker-item">Market data temporarily unavailable</div>';
                return;
            }
            
            validStocks.forEach(stock => {
                const tickerItem = document.createElement('div');
                tickerItem.className = 'ticker-item';
                
                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                const changeIcon = stock.change >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';
                
                tickerItem.innerHTML = `
                    <span class="stock-symbol">${stock.symbol}</span>
                    <span class="stock-price">$${formatPrice(stock.price)}</span>
                    <span class="price-change ${changeClass}">
                        <i class="fas ${changeIcon}"></i>
                        ${stock.change >= 0 ? '+' : ''}${stock.changePercent.toFixed(2)}%
                    </span>
                `;
                
                stockTicker.appendChild(tickerItem);
            });
        }

        // Load market data
        async function loadMarketData() {
            try {
                marketsLoading.style.display = 'block';
                marketsError.style.display = 'none';
                marketsGrid.style.display = 'none';
                
                const stocks = [];
                const indices = [];
                
                // Fetch stock data
                for (const symbol of ENV.TRACKED_STOCKS.slice(0, 6)) {
                    const data = await fetchStockData(symbol);
                    if (data) {
                        stocks.push(data);
                        stockData[symbol] = data;
                    }
                }
                
                // Fetch index data
                for (const symbol of ENV.MARKET_INDICES) {
                    const data = await fetchStockData(symbol);
                    if (data) {
                        indices.push(data);
                    }
                }
                
                displayMarketData(stocks, indices);
                
                // Update trading widget with first stock
                if (stocks.length > 0) {
                    updateTradingWidget('AAPL');
                }
                
            } catch (error) {
                console.error('Error loading market data:', error);
                handleMarketError(error);
            }
        }

        // Display market data
        function displayMarketData(stocks, indices) {
            // Update indices
            if (indices && indices.length >= 3) {
                updateIndexDisplay(dowJones, indices[0]);
                updateIndexDisplay(sp500, indices[1]);
                updateIndexDisplay(nasdaq, indices[2]);
            }
            
            // Update markets grid
            marketsLoading.style.display = 'none';
            marketsGrid.style.display = 'grid';
            marketsGrid.innerHTML = '';
            
            stocks.forEach(stock => {
                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                const changeIcon = stock.change >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';
                
                const marketCard = document.createElement('div');
                marketCard.className = 'feature-card lazy-load';
                marketCard.innerHTML = `
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>${stock.symbol}</h3>
                    <div class="stock-price" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 5px;">
                        $${formatPrice(stock.price)}
                    </div>
                    <div class="price-change ${changeClass}" style="font-weight: 600;">
                        <i class="fas ${changeIcon}"></i>
                        ${stock.change >= 0 ? '+' : ''}${stock.change.toFixed(2)} (${stock.change >= 0 ? '+' : ''}${stock.changePercent.toFixed(2)}%)
                    </div>
                `;
                
                marketsGrid.appendChild(marketCard);
            });

            // Trigger lazy loading
            setTimeout(() => {
                document.querySelectorAll('.lazy-load').forEach(el => {
                    el.classList.add('lazy-loaded');
                });
            }, 100);
        }

        // Update index display
        function updateIndexDisplay(element, index) {
            if (!index) return;
            
            const changeClass = index.change >= 0 ? 'positive' : 'negative';
            element.innerHTML = `
                <div style="font-size: 1.2rem; font-weight: 700;">${formatPrice(index.price)}</div>
                <div class="${changeClass}" style="font-size: 0.9rem;">
                    ${index.change >= 0 ? '+' : ''}${index.change.toFixed(2)} (${index.change >= 0 ? '+' : ''}${index.changePercent.toFixed(2)}%)
                </div>
            `;
        }

        // Load news from GNews API with fallback
        async function loadNews() {
            try {
                newsLoading.style.display = 'block';
                newsError.style.display = 'none';
                newsGrid.style.display = 'none';
                
                // Check if we're online
                if (!isOnline) {
                    throw new Error('Offline - using cached news');
                }

                const response = await fetch(
                    `${ENV.GNEWS_BASE_URL}/top-headlines?category=business&lang=en&country=us&max=6&apikey=${ENV.GNEWS_API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.articles && data.articles.length > 0) {
                    displayNews(data.articles);
                } else {
                    throw new Error('No articles found');
                }
                
            } catch (error) {
                console.error('Error loading news:', error);
                // Use fallback news data
                displayNews(generateFallbackNews());
            }
        }

        // Generate fallback news when API fails
        function generateFallbackNews() {
            return [
                {
                    source: { name: 'Financial Times' },
                    title: 'Markets Show Resilience Amid Economic Uncertainty',
                    publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
                    url: '#'
                },
                {
                    source: { name: 'Bloomberg' },
                    title: 'Tech Stocks Lead Market Rally as Earnings Season Begins',
                    publishedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),
                    url: '#'
                },
                {
                    source: { name: 'Reuters' },
                    title: 'Central Banks Maintain Hawkish Stance on Inflation',
                    publishedAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),
                    url: '#'
                },
                {
                    source: { name: 'Wall Street Journal' },
                    title: 'Investment Firms Increase Exposure to Emerging Markets',
                    publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),
                    url: '#'
                },
                {
                    source: { name: 'CNBC' },
                    title: 'Cryptocurrency Market Shows Signs of Stabilization',
                    publishedAt: new Date(Date.now() - 10 * 60 * 60 * 1000).toISOString(),
                    url: '#'
                },
                {
                    source: { name: 'Forbes' },
                    title: 'Sustainable Investing Gains Traction Among Millennials',
                    publishedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),
                    url: '#'
                }
            ];
        }

        // Display news
        function displayNews(articles) {
            newsLoading.style.display = 'none';
            newsGrid.style.display = 'grid';
            newsGrid.innerHTML = '';
            
            articles.forEach(article => {
                const newsCard = document.createElement('div');
                newsCard.className = 'news-card lazy-load';
                
                const date = new Date(article.publishedAt);
                const timeAgo = getTimeAgo(date);
                
                newsCard.innerHTML = `
                    <div class="news-source">${article.source.name}</div>
                    <div class="news-title">${article.title}</div>
                    <div class="news-date">${timeAgo}</div>
                    <a href="${article.url}" target="_blank" class="btn btn-outline" style="margin-top: 15px; padding: 8px 15px; font-size: 0.8rem;">Read More</a>
                `;
                
                newsGrid.appendChild(newsCard);
            });

            // Trigger lazy loading
            setTimeout(() => {
                document.querySelectorAll('.lazy-load').forEach(el => {
                    el.classList.add('lazy-loaded');
                });
            }, 100);
        }

        // Get time ago string
        function getTimeAgo(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 60) {
                return `${diffMins} minutes ago`;
            } else if (diffHours < 24) {
                return `${diffHours} hours ago`;
            } else {
                return `${diffDays} days ago`;
            }
        }

        // Setup trading pairs interaction
        function setupTradingPairs() {
            const tradingPairs = document.querySelectorAll('.trading-pair');
            
            tradingPairs.forEach(pair => {
                pair.addEventListener('click', function() {
                    tradingPairs.forEach(p => p.classList.remove('active'));
                    this.classList.add('active');
                    
                    const symbol = this.getAttribute('data-symbol');
                    updateTradingWidget(symbol);
                });
            });
        }

        // Update trading widget with selected symbol
        function updateTradingWidget(symbol) {
            const stock = stockData[symbol];
            if (!stock) return;
            
            // Update price and change
            currentPrice.textContent = `$${formatPrice(stock.price)}`;
            
            const changeClass = stock.change >= 0 ? 'positive' : 'negative';
            const changeIcon = stock.change >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';
            
            priceChange.className = `price-change ${changeClass}`;
            priceChange.innerHTML = `<i class="fas ${changeIcon}"></i><span>${stock.change >= 0 ? '+' : ''}${stock.changePercent.toFixed(2)}%</span>`;
            
            // Update chart with new data
            updateChartData(symbol);
        }

        // Update chart with new data
        function updateChartData(symbol) {
            // Generate some random data for demonstration
            // In a real app, you'd fetch historical data
            const basePrice = stockData[symbol] ? stockData[symbol].price : 100;
            const newData = Array.from({length: 7}, (_, i) => {
                const variation = (Math.random() - 0.5) * 10;
                return basePrice + variation * (i + 1);
            });
            
            priceChart.data.datasets[0].data = newData;
            priceChart.data.datasets[0].label = symbol;
            priceChart.update();
        }

        // Setup calculator
        function setupCalculator() {
            const calculateBtn = document.getElementById('calculateBtn');
            calculateBtn.addEventListener('click', calculateInvestment);
            
            // Calculate initial values
            calculateInvestment();
        }

        // Calculate investment
        function calculateInvestment() {
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value);
            const monthlyContribution = parseFloat(document.getElementById('monthlyContribution').value);
            const investmentPeriod = parseInt(document.getElementById('investmentPeriod').value);
            const expectedReturn = parseFloat(document.getElementById('expectedReturn').value) / 100;
            
            const monthlyRate = expectedReturn / 12;
            const months = investmentPeriod * 12;
            
            // Future value of initial investment
            const futureValueInitial = initialInvestment * Math.pow(1 + expectedReturn, investmentPeriod);
            
            // Future value of monthly contributions
            const futureValueContributions = monthlyContribution * ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate) * (1 + monthlyRate);
            
            const totalFutureValue = futureValueInitial + futureValueContributions;
            const totalContributions = initialInvestment + (monthlyContribution * months);
            const interestEarned = totalFutureValue - totalContributions;
            
            // Update results
            document.getElementById('initialResult').textContent = formatCurrency(initialInvestment);
            document.getElementById('contributionsResult').textContent = formatCurrency(totalContributions);
            document.getElementById('interestResult').textContent = formatCurrency(interestEarned);
            document.getElementById('futureValueResult').textContent = formatCurrency(totalFutureValue);
        }

        // Setup contact form with AJAX
        function setupContactForm() {
            const contactForm = document.getElementById('contactForm');
            const formMessage = document.getElementById('formMessage');
            
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Show loading state
                const submitBtn = contactForm.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
                submitBtn.disabled = true;
                
                // Get form data
                const formData = new FormData(contactForm);
                const data = Object.fromEntries(formData);
                
                // Use FormSubmit.co with AJAX
                fetch(ENV.FORM_SUBMIT_ENDPOINT + '/' + ENV.FORM_SUBMIT_EMAIL, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        name: data.name,
                        email: data.email,
                        subject: data.subject,
                        message: data.message,
                        _subject: 'New Contact Form Submission - Foci Finance',
                        _template: 'table',
                        _captcha: 'false'
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success === 'true') {
                        // Show success message
                        formMessage.textContent = 'Thank you! Your message has been sent successfully. We will get back to you soon.';
                        formMessage.className = 'form-message success';
                        
                        // Reset form
                        contactForm.reset();
                    } else {
                        throw new Error('Form submission failed');
                    }
                })
                .catch(error => {
                    // Show error message
                    formMessage.textContent = 'Sorry, there was an error sending your message. Please try again or contact us directly at info@focifinance.com.';
                    formMessage.className = 'form-message error';
                    console.error('Form submission error:', error);
                })
                .finally(() => {
                    // Reset button
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    
                    // Hide message after 5 seconds
                    setTimeout(() => {
                        formMessage.style.display = 'none';
                    }, 5000);
                });
            });
        }

        // Setup lazy loading
        function setupLazyLoading() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('lazy-loaded');
                        observer.unobserve(entry.target);
                    }
                });
            });
            
            // Observe all lazy-load elements
            document.querySelectorAll('.lazy-load').forEach(el => {
                observer.observe(el);
            });
        }

        // Setup offline detection
        function setupOfflineDetection() {
            window.addEventListener('online', () => {
                isOnline = true;
                console.log('Application is online');
                // Refresh data when coming back online
                loadStockTicker();
                loadMarketData();
                loadNews();
            });
            
            window.addEventListener('offline', () => {
                isOnline = false;
                console.log('Application is offline - using cached data');
                // Show offline indicator
                const offlineIndicator = document.createElement('div');
                offlineIndicator.style.cssText = 'position: fixed; top: 80px; left: 0; width: 100%; background: var(--warning); color: white; text-align: center; padding: 10px; z-index: 1001;';
                offlineIndicator.textContent = 'You are currently offline. Some data may not be up to date.';
                document.body.appendChild(offlineIndicator);
                
                setTimeout(() => {
                    document.body.removeChild(offlineIndicator);
                }, 5000);
            });
        }

        // Setup mobile nav scrolling
        function setupMobileNavScrolling() {
            const mobileNav = document.querySelector('.mobile-nav');
            const mobileNavLinks = document.querySelector('.mobile-nav-links');
            
            // Auto-scroll to active item
            function scrollToActiveItem() {
                const activeItem = mobileNavLinks.querySelector('.active');
                if (activeItem) {
                    const containerWidth = mobileNav.offsetWidth;
                    const itemOffset = activeItem.offsetLeft;
                    const itemWidth = activeItem.offsetWidth;
                    
                    mobileNav.scrollLeft = itemOffset - (containerWidth / 2) + (itemWidth / 2);
                }
            }
            
            // Update active nav item based on scroll position
            window.addEventListener('scroll', function() {
                const sections = document.querySelectorAll('section');
                const navLinks = document.querySelectorAll('.mobile-nav-links a');
                
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (pageYOffset >= sectionTop - 200) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === current) {
                        link.classList.add('active');
                    }
                });
                
                // Scroll to active item
                scrollToActiveItem();
            });
            
            // Initial scroll to active item
            setTimeout(scrollToActiveItem, 100);
        }

        // Setup auto-refresh
        function setupAutoRefresh() {
            // Refresh stock data every 60 seconds
            setInterval(() => {
                if (isOnline) {
                    loadStockTicker();
                    loadMarketData();
                }
            }, ENV.STOCK_REFRESH_INTERVAL);
            
            // Refresh news every 10 minutes
            setInterval(() => {
                if (isOnline) {
                    loadNews();
                }
            }, ENV.NEWS_REFRESH_INTERVAL);
            
            // Update market status
            updateMarketStatus();
            setInterval(updateMarketStatus, ENV.MARKET_STATUS_REFRESH);
        }

        // Update market status
        function updateMarketStatus() {
            const now = new Date();
            const day = now.getDay();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            
            // Simple market hours check (9:30 AM - 4:00 PM ET, Monday-Friday)
            const isMarketOpen = day >= 1 && day <= 5 && 
                                ((hours > 9 || (hours === 9 && minutes >= 30)) && hours < 16);
            
            if (isMarketOpen) {
                marketStatus.className = 'market-status market-open';
                marketStatus.innerHTML = '<i class="fas fa-circle"></i><span>Market Open</span>';
            } else {
                marketStatus.className = 'market-status market-closed';
                marketStatus.innerHTML = '<i class="fas fa-circle"></i><span>Market Closed</span>';
            }
        }

        // Format price for display
        function formatPrice(price) {
            if (price > 1000) {
                return price.toLocaleString('en-US', { maximumFractionDigits: 0 });
            } else {
                return price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            }
        }

        // Format currency for display
        function formatCurrency(value) {
            return '$' + value.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }

        // Error handlers
        function handleTickerError(error) {
            console.error('Ticker error:', error);
            stockTicker.innerHTML = '<div class="ticker-item">Market data temporarily unavailable</div>';
        }

        function handleMarketError(error) {
            console.error('Market error:', error);
            marketsLoading.style.display = 'none';
            marketsError.style.display = 'block';
            
            // Show fallback data
            const fallbackStocks = ENV.TRACKED_STOCKS.slice(0, 6).map(symbol => generateFallbackData(symbol));
            const fallbackIndices = ENV.MARKET_INDICES.map(symbol => generateFallbackData(symbol));
            displayMarketData(fallbackStocks, fallbackIndices);
        }

        function handleNewsError(error) {
            console.error('News error:', error);
            newsLoading.style.display = 'none';
            newsError.style.display = 'block';
        }

        // Mobile Navigation Active State
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-links a');
        
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', function() {
                mobileNavLinks.forEach(item => item.classList.remove('active'));
                this.classList.add('active');
                
                // Scroll to active item
                setTimeout(() => {
                    const mobileNav = document.querySelector('.mobile-nav');
                    const containerWidth = mobileNav.offsetWidth;
                    const itemOffset = this.offsetLeft;
                    const itemWidth = this.offsetWidth;
                    
                    mobileNav.scrollLeft = itemOffset - (containerWidth / 2) + (itemWidth / 2);
                }, 100);
            });
        });
    </script>
</body>
</html>